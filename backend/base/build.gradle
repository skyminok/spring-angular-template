plugins {
    id "com.palantir.git-version" version "0.12.3"
}

dependencies {
    // project modules
    runtimeOnly project(':core:core-service')
    runtimeOnly project(':backend:features:user-lib')
    api project(':backend:commons:common-rest')
    api project(':backend:commons:model')

    // utils
    runtimeOnly 'org.codehaus.janino:janino'
    runtimeOnly 'org.liquibase:liquibase-core'
    runtimeOnly 'com.h2database:h2'
    runtimeOnly 'org.postgresql:postgresql:42.2.14'

    compileOnly 'org.springframework.boot:spring-boot-devtools'
}


processResources {
    filesMatching('**version.properties') {
        //noinspection GroovyAssignabilityCheck
        def details = versionDetails()
        expand(
                'projectVersion': "${project.version}",
                'gitHashFull': details.gitHashFull,
                'gitHash': details.gitHash,
                'gitBranch': details.branchName,
        )
    }
}